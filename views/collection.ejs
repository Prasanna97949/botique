<%- include('partials/header') %>

<!-- Filters -->
<div style="height: fit-content; width: fit-content;" class="p-2 bg-white m-3 rounded-2xl absolute z-10 sticky top-16">
    <svg id="openfil" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z" />
    </svg>
</div>
<form action="/collection/filter" method="post">
<div id="filter" style="width: 40%; height: fit-content; margin-left: -40%;" class="mt-3 m-1 p-2 bg-white fixed z-20 transition-all duration-1000">
    <div class="text-right cursor-pointer">
        <h1 id="close-fil">X</h1>
    </div>
    <div class="flex justify-between mt-3">
       
        <div class="flex">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z" />
            </svg>
            <h3 class="font-bold">Filters</h3>
        </div>
        <button type="submit" class="bg-blue-400 rounded-2xl px-2 py-1 hover:bg-opacity-50">Apply</button>
    </div>
    <hr class="mt-2">
    <div class="mt-2">
        <h3 class="font-bold">Filter by Cost</h3>
        <% if (locals.checked ? checked:"") { %>
            <label class="flex items-center space-x-2">
                <input type="radio" name="price" value="ASC" class="form-radio text-blue-600 h-4 w-4" >
                <span class="text-gray-700">Price: Low to High</span>
            </label>
            <label class="flex items-center space-x-2">
                <input type="radio" name="price" value="DESC" class="form-radio text-blue-600 h-4 w-4" checked="checked">
                <span class="text-gray-700">Price: High to Low</span>
            </label>
        
        <% } else { %>
            <label class="flex items-center space-x-2">
                <input type="radio" name="price" value="ASC" class="form-radio text-blue-600 h-4 w-4" checked="checked">
                <span class="text-gray-700">Price: Low to High</span>
            </label>
            <label class="flex items-center space-x-2">
                <input type="radio" name="price" value="DESC" class="form-radio text-blue-600 h-4 w-4" >
                <span class="text-gray-700">Price: High to Low</span>
            </label>
            <% } %>
         
    </div>
    <hr class="mt-2">
    <div class="mt-2">
        <h3 class="font-bold">Filter by Category</h3>
        <label class="flex items-center space-x-2 mt-2">
            <% if (typeof locals?.filter === 'string' ? locals?.filter === 'silk' : Array.isArray(locals?.filter) && locals?.filter.includes('silk')) { %>
                <input type="checkbox" name="category" value="silk" class="form-checkbox text-green-600 h-4 w-4" checked>
                <span class="text-gray-700">Silk Sarees</span>
            <% }
             else { %>
             
            
            <input type="checkbox" name="category" value="silk" class="form-checkbox text-green-600 h-4 w-4" >
            <span class="text-gray-700">Silk Sarees</span>
            <% } %>
        </label>
        <label class="flex items-center space-x-2 mt-2">
            <% if (typeof locals?.filter === 'string' ? locals?.filter === 'cotton' : Array.isArray(locals?.filter) && locals?.filter.includes('cotton')) { %>
                <input type="checkbox" name="category" value="cotton" class="form-checkbox text-green-600 h-4 w-4" checked>
                <span class="text-gray-700">Cotton Sarees</span>
            <% } 
              else { %>
             
            
            <input type="checkbox" name="category" value="cotton" class="form-checkbox text-green-600 h-4 w-4" >
            <span class="text-gray-700">Cotton Sarees</span>
            <% } %>
            
        </label>
        <label class="flex items-center space-x-2 mt-2">
            <% if (typeof locals?.filter === 'string' ? locals?.filter === 'polyester' : Array.isArray(locals?.filter) && locals?.filter.includes('polyester')) { %>
                <input type="checkbox" name="category" value="polyester" class="form-checkbox text-green-600 h-4 w-4" checked>
                <span class="text-gray-700">Polyester Sarees</span>
            <% } 
             else { %>
             
            
            <input type="checkbox" name="category" value="polyester" class="form-checkbox text-green-600 h-4 w-4" >
            <span class="text-gray-700">Polyester Sarees</span>
            <% } %>
        </label>
    </div>
</div>
</form>

<!-- Products -->
<div>
    <div class="p-2 text-center">
        <h1 class="text-4xl text-white font-bold p-2">Our Collections</h1>
    </div>
    <hr>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <% products.forEach(product => { %>
            <div class="p-4  rounded-lg shadow-lg">
                
                <a href="/product/<%= product.id %>"><img src="/uploads/<%= product.image_1 %>"  alt="<%= product.name %>" class="w-full h-64 object-cover rounded-md"></a>
                <h2 class="text-white text-2xl font-bold mt-4"><%= product.name %></h2>
                <div class="flex items-center mb-4">
                        <span class="text-2xl font-bold text-white">₹<%= product.price %></span>
                        <% if (product.price_2) { %>  
                        <span class="ml-2 text-sm line-through text-gray-500">₹ <%= product.price_2 %></span>
                        <% } %>

                        <% if (product.offer) { %>  
                        <span class="ml-4 text-green-600"><%= product.offer %>% Off</span>
                        <% } %>
                    </div>
                <p class="text-white mt-2"><%= product.description %></p>
                <form action="/product/<%= product.id %>" method="get">
                    <button type="submit" class="w-full px-3 py-2 bg-black hover:bg-blue-600 text-white font-bold rounded mt-4">View Product</button>

                </form>
 

            </div>
        <% }); %>
    </div>
  
</div>

<!-- Footer -->
<%- include('partials/footer') %>
<script src="/js/collection.js"></script>
</body>
</html>
