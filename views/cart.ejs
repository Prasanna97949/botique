<%- include('partials/header') %>
    
    <!-- Content -->
    <div class="container mx-auto p-6">
        <h1 class="text-3xl text-white font-bold text-center mb-6">Shopping Cart</h1>

        <div class="bg-white shadow rounded-lg p-6">
            <div class="cart-items space-y-6">
                <% if (cart.length > 0) { %>
                 
               
                <% cart.forEach(item => { %>
                <div class="cart-item flex items-center space-x-4">
                    <img src="/uploads/<%= item.image %>" alt="<%= item.name %>" class="w-36 h-36 rounded-lg object-cover">
                    <div class="flex-1">
                        <h2 class="text-lg font-semibold"><%= item.name %></h2>
                        <p class="text-gray-600">Price: ₹<span class="product-price"><%= item.price %></span></p>
                        <form action="/cart/update/<%= item.id %>" method="POST" class="inline">
                          <div class="flex items-center mt-3 space-x-2">

                               <input type="number" id="quantity" name="quantity" value="<%= item.quantity %>" min="1" class="border p-2 rounded w-20 ml-2">
                               
                             </div> 
                             <button type="submit" class="mt-2 bg-blue-500 text-white px-3 py-2 rounded hover:bg-blue-600">Update</button> 
                         </form>
                        <form action="/cart/remove/<%= item.id %>" method="POST" class="inline">
                            <button type="submit" class="mt-2 bg-blue-500 text-white px-3 py-2 rounded hover:bg-blue-600">Remove</button>
                        </form>
                    </div>
                    <div class="item-total text-right">
                        <p class="text-gray-700">Total: ₹<span class="item-total-price"><%= item.quantity * item.price %></span></p>
                    </div>
                </div>
                <% }); %>
                <% } else {%>
                    <p>Your cart is empty.</p>
                    <a href="/collection">Continue Shopping</a>

                    <% } %>
                
            </div>
        </div>
        <% if (cart.length>0) { %>
            <div class="cart-summary bg-white shadow rounded-lg p-6 mt-6">
                <h3 class="text-xl font-bold mb-4">Cart Summary</h3>
                <hr>
                <p class="text-gray-700 mb-2">Total Items: <span id="total-items"><%= cart.reduce((acc, item) => acc + item.quantity, 0) %></span></p>
                <hr>
                <p class="text-gray-700 mb-4">Grand Total: ₹<span id="grand-total"><%= cart.reduce((acc, item) => acc + (item.price * item.quantity), 0) %></span></p>
                <hr>
                <a href="/checkout" style="width: auto;"> <button class="mt-3 bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600">Proceed to Checkout</button></a>
            </div>
         
        <% } else { %>

        <div class="cart-summary bg-white shadow rounded-lg p-6 mt-6">
            <h3 class="text-xl font-bold mb-4">Cart Summary</h3>
            <hr>
            <p class="text-gray-700 mb-2">Total Items: <span id="total-items"><%= cart.reduce((acc, item) => acc + item.quantity, 0) %></span></p>
            <hr>
            <p class="text-gray-700 mb-4">Grand Total: ₹<span id="grand-total"><%= cart.reduce((acc, item) => acc + (item.price * item.quantity), 0) %></span></p>
            <hr>
             <button class="mt-3 bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600">Proceed to Checkout</button>
        </div>
        <% } %>
    </div>

    <!-- Footer -->
    <script src="/js/cart.js"></script>
<%- include('partials/footer') %>

</body>
</html>
