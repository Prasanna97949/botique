<%- include('partials/header') %>
     <!-- content -->
     <div class="container mx-auto p-6">
        <h1 class="text-3xl text-white font-bold text-center mb-6">Checkout</h1>
    
        <div class="bg-white shadow rounded-lg p-6">
            <h2 class="text-2xl font-bold mb-4">Billing Details</h2>
            <form id="checkout-form" > 
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="form-group">
                        <label for="first_name" class="text-gray-700">First Name</label>
                        <input type="text" id="first_name" name="first_name" class="form-control w-full border rounded-md p-2" required value="<%=locals.first_name ? first_name:"" %>">
                    </div>
                    <div class="form-group">
                        <label for="last_name" class="text-gray-700">Last Name</label>
                        <input type="text" id="last_name" name="last_name" class="form-control w-full border rounded-md p-2" required value="<%=locals.last_name ? last_name:"" %>">
                    </div>
                    <div class="form-group">
                        <label for="email" class="text-gray-700">Email</label>
                        <input type="email" id="email" name="email" class="form-control w-full border rounded-md p-2" required value="<%=locals.email ? email:"" %>">
                    </div>
                    <div class="form-group">
                        <label for="phone" class="text-gray-700">Phone Number</label>
                        <input type="tel" id="phone" name="phone" minlength="10" maxlength="10" size="10" class="form-control w-full border rounded-md p-2" required value="<%=locals.phone ? phone:"" %>">
                    </div>
                    <div class="form-group">
                        <label for="address" class="text-gray-700">Address</label>
                        <input type="text" id="address" name="address" class="form-control w-full border rounded-md p-2" required value="<%=locals.address ? address:"" %>">
                    </div>
                    <div class="form-group">
                        <label for="city" class="text-gray-700">City</label>
                        <input type="text" id="city" name="city" class="form-control w-full border rounded-md p-2" required value="<%=locals.city ? city:"" %>">
                    </div>
                    <div class="form-group">
                        <label for="state" class="text-gray-700">State</label>
                        <input type="text" id="state" name="state" class="form-control w-full border rounded-md p-2" required value="<%=locals.state ? state:"" %>">
                    </div>
                    <div class="form-group">
                        <label for="zip" class="text-gray-700">ZIP Code</label>
                        <input type="text" id="zip" name="zip" class="form-control w-full border rounded-md p-2" required value="<%=locals.zip ? zip:"" %>">
                    </div>
                    <div class="form-group md:col-span-2">
                        <label for="notes" class="text-gray-700">Order Notes</label>
                        <textarea id="notes" name="notes" class="form-control w-full border rounded-md p-2" rows="4"></textarea>
                    </div>
                </div>
                <div class="bg-white shadow rounded-lg p-6">
                    <div class="cart-items space-y-6">
                        <% cart.forEach(item => { %>
                        <div class="cart-item flex items-center space-x-4">
                            <img src="/uploads/<%= item.image %>" alt="<%= item.name %>" class="w-36 h-36 rounded-lg object-cover">
                            <div class="flex-1">
                                <h2 class="text-lg font-semibold"><%= item.name %></h2>
                                <p class="text-gray-600">Price: ₹<span class="product-price"><%= item.price %></span></p>
                                
                                  
        
                                <p class="text-gray-600">Quantity: <span ><%= item.quantity %></span></p>
                                     
                                    
                                 
                                
                            </div>
                            <div class="item-total text-right">
                                <p class="text-gray-700">Total: ₹<span class="item-total-price"><%= item.quantity * item.price %></span></p>
                            </div>
                        </div>
                        <% }); %>
                    </div>
                </div>
                <div class="mt-6">
                    <h2 class="text-2xl font-bold mb-4">Order Summary</h2>
                    <div class="cart-summary bg-white shadow rounded-lg p-6">
                        <hr>
                        <p class="text-gray-700 mb-2">Total Items: <span id="total-items"><%= cart.reduce((acc, item) => acc + item.quantity, 0) %></span></p>
                        <hr>
                        <p class="text-gray-700 mb-4">Grand Total: ₹<span id="grand-total"><%= cart.reduce((acc, item) => acc + (item.price * item.quantity), 0) %></span></p>
                        <hr>
                    </div>
                </div>
                <input type="number" hidden id="user_id" name="user_id" value="<%= user_id %>" >
                <input type="number" hidden id="amount" name="amount" required value="<%= cart.reduce((acc, item) => acc + (item.price * item.quantity), 0) %>">  
                <button type="submit"  id="pay-button" class="mt-3 bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600">Place Order</button>
            </form>

           

        </div>
    </div>
     <!-- Footer -->
   <%- include('partials/footer') %>
   <script src="/js/payment.js"></script>
     <script src="/js/checkout.js"></script>
    
</body>
</html>